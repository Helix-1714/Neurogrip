#include <Servo.h>

Servo thumbServo;
Servo joint2Servo;
Servo joint3Servo;

String command = "";

void setup() {
  Serial.begin(9600);

  thumbServo.attach(3);   // Pin for thumb servo
  joint2Servo.attach(6);  // Pin for joint2 servo
  joint3Servo.attach(5);  // Pin for joint3 servo

  // Initialize to closed position
  thumbServo.write(0);
  joint2Servo.write(0);
  joint3Servo.write(0);

  Serial.println("Arduino Ready");
}

void loop() {
  // Read serial commands from browser
  while (Serial.available() > 0) {
    char c = Serial.read();
    if (c == '\n') {
      processCommand(command);
      command = "";
    } else {
      command += c;
    }
  }
}

void processCommand(String cmd) {
  cmd.trim();  // Remove spaces/newlines

  if (cmd == "thumb_open") {
    thumbServo.write(180);  // Adjust angles as needed
    Serial.println("Thumb opened");
  } else if (cmd == "thumb_close") {
    thumbServo.write(0);
    Serial.println("Thumb closed");
  }

  else if (cmd == "joint2_open") {
    joint2Servo.write(180);
    Serial.println("Joint2 opened");
  } else if (cmd == "joint2_close") {
    joint2Servo.write(0);
    Serial.println("Joint2 closed");
  }

  else if (cmd == "joint3_open") {
    joint3Servo.write(180);
    Serial.println("Joint3 opened");
  } else if (cmd == "joint3_close") {
    joint3Servo.write(0);
    Serial.println("Joint3 closed");
  }
  delay(300);
}
